<!doctype html>
<html lang="fr">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Menu - HealthyBox</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="styles/main.css" />
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.lordicon.com/lordicon.js"></script>
        <script>
                function trackOrder() {
                    alert("Votre commande est en cours de traitement. Veuillez patienter.");
                }
        </script>
    </head>
    <body>
        <!-- En-tête -->
        <header class="bg-success text-white py-3">
            <div
                class="container d-flex justify-content-between align-items-center"
            >
                <div class="logo fs-4 fw-bold">HealthyBox</div>
                <nav>
                    <a
                        href="index.html"
                        class="text-white text-decoration-none mx-3"
                        >Accueil</a
                    >
                    <a
                        href="menu.html"
                        class="text-white text-decoration-none mx-3 active"
                        >Menu</a
                    >
                    <a
                        href="subscription.html"
                        class="text-white text-decoration-none mx-3"
                        >Abonnement</a
                    >
                    <a
                        href="#contact"
                        class="text-white text-decoration-none mx-3"
                        >Contact</a
                    >
                    <a
                        href="profile.html"
                        class="text-white text-decoration-none mx-3"
                    >
                        <img
                            src="assets/images/fedi.jpg"
                            alt="Photo de profil"
                            class="rounded-circle"
                            style="width: 40px; height: 40px"
                        />
                    </a>
                </nav>
            </div>
        </header>

        <!-- Section Menu -->
        <section class="menu py-5">
            <div class="container text-center">
                <h2 class="display-4 mb-4">Notre Menu</h2>
                <p class="lead mb-5">
                    Cliquez sur un plat pour gérer ses ingrédients.
                </p>

                <!-- Liste des plats -->
                <div class="row">
                    <!-- Plat 1 -->
                    <div class="col-md-4 mb-4 d-flex flex-column">
                        <div class="card shadow-lg flex-grow-1" onclick="openModal('Tomates Farcies au Comté')">
                            <img src="assets/images/tomates-farcies.jpg" class="card-img-top" alt="Tomates Farcies" />
                            <div class="card-body text-center">
                                <h5 class="card-title">Tomates Farcies au Comté</h5>
                                <p class="card-text">Cliquez pour gérer les ingrédients</p>
                            </div>
                        </div>
                        <button class="btn btn-primary w-100 mt-2" onclick="trackOrder()">
                            Commander
                        </button>
                    </div>

                    <!-- Plat 2 -->
                    <div class="col-md-4 mb-4 d-flex flex-column">
                        <div class="card shadow-lg flex-grow-1" onclick="openModal('Lasagnes aux légumes')">
                            <img src="assets/images/lasagnes-legumes.jpg" class="card-img-top" alt="Lasagnes" />
                            <div class="card-body text-center">
                                <h5 class="card-title">Lasagnes aux légumes sans gluten</h5>
                                <p class="card-text">Cliquez pour gérer les ingrédients</p>
                            </div>
                        </div>
                        <button class="btn btn-primary w-100 mt-2" onclick="trackOrder()">
                            Commander
                        </button>
                    </div>

                    <!-- Plat 3 -->
                    <div class="col-md-4 mb-4 d-flex flex-column">
                        <div class="card shadow-lg flex-grow-1" onclick="openModal('Salade César')">
                            <img src="assets/images/salade-cesar.jpg" class="card-img-top" alt="Salade César" />
                            <div class="card-body text-center">
                                <h5 class="card-title">Salade César</h5>
                                <p class="card-text">Cliquez pour gérer les ingrédients</p>
                            </div>
                        </div>
                        <button class="btn btn-primary w-100 mt-2" onclick="trackOrder()">
                            Commander
                        </button>
                    </div>
                </div>

                </div>
            </div>
        </section>

        <!-- Footer -->
        <!-- Footer -->
        <footer id="contact" class="bg-dark text-white py-4">
            <div class="container text-center">
                <p>
                    Contactez-nous :
                    <lord-icon
                        src="https://cdn.lordicon.com/nqisoomz.json"
                        trigger="loop"
                        style="width: 30px; height: 30px; top: 10px"
                    >
                    </lord-icon>
                    <a href="mailto:info@healthybox.com" class="text-success"
                        >healthybox2025@gmail.com</a
                    >
                </p>
                <p>
                    Suivez-nous :
                    <lord-icon
                        src="https://cdn.lordicon.com/gnqwqcgx.json"
                        trigger="loop"
                        style="width: 20px; height: 20px; top: 3px"
                    >
                    </lord-icon>
                    <a href="#" class="text-success mx-1">Facebook</a> |
                    <lord-icon
                        src="https://cdn.lordicon.com/pwqdtrya.json"
                        trigger="loop"
                        style="width: 20px; height: 20px; top: 5px"
                    >
                    </lord-icon>
                    <a href="#" class="text-success mx-1">Instagram</a> |
                    <lord-icon
                        src="https://cdn.lordicon.com/qrsdbrog.json"
                        trigger="loop"
                        style="width: 20px; height: 20px; top: 5px"
                    >
                    </lord-icon>
                    <a href="#" class="text-success mx-1">Twitter</a>
                </p>
            </div>
        </footer>

        <!-- Boîte modale -->
        <div
            class="modal fade"
            id="mealModal"
            tabindex="-1"
            aria-labelledby="mealModalLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="mealModalLabel"></h5>
                        <button
                            type="button"
                            class="btn-close"
                            data-bs-dismiss="modal"
                            aria-label="Fermer"
                        ></button>
                    </div>
                    <div class="modal-body">
                        <ul id="ingredientList" class="list-group mb-3"></ul>
                        <div class="input-group">
                            <input
                                type="text"
                                id="newIngredient"
                                class="form-control"
                                placeholder="Ajouter un ingrédient"
                            />
                            <button
                                class="btn btn-success"
                                onclick="addIngredient()"
                            >
                                Ajouter
                            </button>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-secondary"
                            data-bs-dismiss="modal"
                        >
                            Fermer
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Script -->
        <script>
            let dishIngredients = {
                "Tomates Farcies au Comté": [
                    "Tomate",
                    "Parmesan râpé",
                    "Thym frais",
                    "Ail",
                    "Burrata",
                    "Courgette",
                    "Farine de blé",
                ],
                "Lasagnes aux légumes": [
                    "Aubergines",
                    "Sauce tomate",
                    "Ail",
                    "Laurier",
                    "Thym",
                    "Béchamel",
                    "Fromage râpé",
                ],
                "Salade César": [
                    "Laitue",
                    "Poulet",
                    "Tomates cerise",
                    "Oignon rouge",
                    "Œuf",
                    "Parmesan",
                ],
            };

            let currentDish = "";
            let currentIngredients = [];

            function openModal(title) {
                currentDish = title;
                currentIngredients = [...dishIngredients[title]];
                document.getElementById("mealModalLabel").textContent = title;
                updateIngredientList();
                const modal = new bootstrap.Modal(
                    document.getElementById("mealModal"),
                );
                modal.show();
            }

            function updateIngredientList() {
                const ingredientList =
                    document.getElementById("ingredientList");
                ingredientList.innerHTML = "";
                currentIngredients.forEach((ingredient, index) => {
                    const li = document.createElement("li");
                    li.className =
                        "list-group-item d-flex justify-content-between align-items-center";
                    li.textContent = ingredient;
                    const deleteBtn = document.createElement("button");
                    deleteBtn.className = "btn btn-danger btn-sm";
                    deleteBtn.textContent = "Supprimer";
                    deleteBtn.onclick = () => removeIngredient(index);
                    li.appendChild(deleteBtn);
                    ingredientList.appendChild(li);
                });
            }

            function addIngredient() {
                const newIngredient = document
                    .getElementById("newIngredient")
                    .value.trim();
                if (
                    newIngredient &&
                    !currentIngredients.includes(newIngredient)
                ) {
                    currentIngredients.push(newIngredient);
                    dishIngredients[currentDish] = [...currentIngredients];
                    document.getElementById("newIngredient").value = "";
                    updateIngredientList();
                }
            }

            function removeIngredient(index) {
                currentIngredients.splice(index, 1);
                dishIngredients[currentDish] = [...currentIngredients];
                updateIngredientList();
            }
        </script>
    </body>
</html>
